/* === Base Alias Layer (legacy compat) === */
:root{
  /* WA tokens (already below) will override semantics; keep aliases for old pages */
  --bg: var(--wa-bg, #0b141a);
  --card: var(--wa-panel, #111b21);
  --bg-2: var(--wa-card, #1f2c33);
  --brand: var(--wa-accent, #25D366);
  --brand-2: var(--wa-green-dark, #075E54);
  --danger:#ef4444; --ok:#22c55e; --warn:#f59e0b;
  --space:14px; --radius:16px;
  --shadow:0 10px 30px rgba(0,0,0,.25);
  --font: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
}
img#qrimg { width:100%; max-width:320px; display:block; margin:0 auto; }
.toast{position:fixed;right:16px;bottom:16px;background:#0d1117;color:#e6e8ec;padding:12px 14px;border-radius:12px;box-shadow:var(--shadow);opacity:0;transform:translateY(8px);transition:.25s;z-index:9999;font-size:14px;}
.toast.show{opacity:1;transform:translateY(0)}
.toast.ok{border:1px solid #1f4633;background:#0f1a16}
.toast.err{border:1px solid #3f1d1d;background:#190f0f}
.skeleton{border-radius:12px;background:linear-gradient(90deg,#121620,#161b27,#121620);background-size:200% 100%;animation:shimmer 1.1s infinite;}
@keyframes shimmer{0%{background-position:0% 0}100%{background-position:200% 0}}

/* === WhatsApp Business Theme Overrides === */
:root{
  --wa-green:#128C7E; --wa-green-dark:#075E54; --wa-accent:#25D366;
  --wa-bg:#0b141a; --wa-panel:#111b21; --wa-card:#1f2c33; --wa-border:#23323a;
  --text:#e9edef; --muted:#8696a0; --bubble-out:#005c4b; --bubble-in:#202c33;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.25);
  --font: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
}
html,body{margin:0;background:var(--wa-bg);color:var(--text);font-family:var(--font)}
a{color:var(--wa-accent);text-decoration:none} a:hover{opacity:.9}
.container{max-width:1200px;margin:0 auto;padding:16px}
.btn{border:0;border-radius:999px;padding:10px 16px;background:var(--wa-accent);color:#041310;font-weight:700;cursor:pointer}
.input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--wa-border);background:#0e171d;color:var(--text)}
.card{background:var(--wa-panel);border:1px solid var(--wa-border);border-radius:12px;box-shadow:var(--shadow);padding:16px}
.topbar{position:sticky;top:0;background:var(--wa-green-dark);border-bottom:1px solid #06473f;color:#fff}
.topbar-inner{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:10px 14px;gap:8px}
.top-left{display:flex;gap:8px;align-items:center}
.top-right{display:flex;gap:8px;align-items:center;justify-self:end}
.brand{display:flex;gap:10px;align-items:center;font-weight:900;letter-spacing:.3px;justify-self:center}
/* App Layout */
.app{display:grid;grid-template-columns:360px 1fr;min-height:100vh}
.sidebar{background:var(--wa-panel);border-right:1px solid var(--wa-border);display:flex;flex-direction:column;min-width:0}
.chat{background:#0e171d;display:flex;flex-direction:column;min-width:0}
.s-header{display:flex;justify-content:space-between;align-items:center;padding:12px;border-bottom:1px solid var(--wa-border)}
.s-search{padding:10px;border-bottom:1px solid var(--wa-border)}
.s-filters{display:flex;gap:8px;padding:8px 10px;border-bottom:1px solid var(--wa-border)}
.chip{background:#0f1a20;border:1px solid var(--wa-border);color:var(--text);border-radius:999px;padding:6px 10px;font-size:.9rem;cursor:pointer}
.chip.is-active{border-color:#1b3d36;background:#11332d}
.chat-list{overflow:auto}
.chat-item{display:flex;gap:12px;padding:12px 14px;border-bottom:1px solid var(--wa-border);cursor:pointer}
.chat-item:hover{background:#0f1a20}
.chat-item.is-active{background:#132026}
.chat-item .avatar{width:40px;height:40px;border-radius:50%;background:#20303a}
.chat-item .meta{flex:1;min-width:0}
.chat-item .name{font-weight:700}
.chat-item .last{color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-item .time{color:var(--muted);font-size:.85rem}
.c-header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--wa-border);background:var(--wa-card)}
.c-header .peer{display:flex;gap:10px;align-items:center}
.c-header .avatar{width:36px;height:36px;border-radius:50%;background:#20303a}
.c-header .name{font-weight:700}
.c-header .status{color:var(--muted);font-size:.9rem}
.c-messages{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:8px;background:#0b141a}
.msg{max-width:70%;padding:10px 12px;border-radius:12px;line-height:1.35}
.msg.in{background:var(--bubble-in);margin-right:auto}
.msg.out{background:var(--bubble-out);margin-left:auto}
.msg .meta{display:block;margin-top:4px;color:#aeb6bb;font-size:.78rem;opacity:.8;text-align:right}
.c-composer{display:flex;gap:8px;padding:10px;border-top:1px solid var(--wa-border);background:var(--wa-card)}
.c-composer textarea.input{min-height:42px;max-height:140px;line-height:1.35;padding-top:12px;padding-bottom:12px}
.icon-btn{background:transparent;border:1px solid var(--wa-border);color:var(--text);border-radius:10px;padding:8px 10px;cursor:pointer}
.badge{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;border:1px solid #1b3a32;background:#0f1a16;color:#9be3c2;font-size:.82rem}
@media (max-width:1023px){
  .app{grid-template-columns:1fr}
  .sidebar{display:block}
  .chat{display:none}
  .app[data-view="chat"] .sidebar{display:none}
  .app[data-view="chat"] .chat{display:flex}
}
@media (min-width:1024px){
  .container{max-width:1200px}
}
/* Menu & Modal */
.menu{display:flex;gap:8px}
.menu .m-btn{background:transparent;border:1px solid var(--wa-border);color:var(--text);border-radius:10px;padding:8px 12px;cursor:pointer}
.menu .m-btn{position:relative;transition:background .15s,border-color .15s,transform .15s}
.menu .m-btn:hover{background:rgba(255,255,255,.05)}
.menu .m-btn:active{transform:translateY(1px)}
.menu .m-btn:focus-visible{outline:2px solid var(--wa-accent);outline-offset:2px}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:100}
.modal.show{display:flex}
.modal-card{background:var(--wa-panel);border:1px solid var(--wa-border);border-radius:14px;box-shadow:var(--shadow);width:min(680px,92vw);max-height:86vh;display:flex;flex-direction:column}
.modal-h{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--wa-border)}
.modal-b{padding:14px;overflow:auto}
.modal-f{display:flex;gap:8px;justify-content:flex-end;padding:12px 14px;border-top:1px solid var(--wa-border);flex-wrap:wrap}
.drawer{position:fixed;inset:0;display:none;background:rgba(0,0,0,.4);z-index:120}
.drawer.show{display:block}
.drawer-panel{position:absolute;right:0;top:0;bottom:0;width:min(420px,92vw);background:var(--wa-panel);border-left:1px solid var(--wa-border);box-shadow:var(--shadow);display:flex;flex-direction:column}
.drawer-h{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--wa-border)}
.drawer-b{padding:14px;overflow:auto}
.drawer-f{display:flex;gap:8px;justify-content:flex-end;padding:12px 14px;border-top:1px solid var(--wa-border)}
.row{display:flex;gap:10px;align-items:center;margin:8px 0}
.label{width:140px;color:var(--muted);font-size:.92rem}
.help{color:var(--muted);font-size:.85rem}
.menu .m-btn:hover{opacity:1}
.modal-b .row{margin:12px 0}
textarea.input{font-family:inherit;font-size:14px;line-height:1.4;}
.input[type="datetime-local"]{font-family:inherit;font-size:14px;color:var(--text);background:#0e171d;}
/* (3) Layout WhatsApp: aguardando especificação para .app structure */
/* === Responsive & Accessibility Enhancements (added) === */
html{font-size:15px}
@media (min-width:480px){html{font-size:15.5px}}
@media (min-width:640px){html{font-size:16px}}
@media (min-width:900px){html{font-size:16.25px}}
@media (min-width:1280px){html{font-size:16.5px}}
body{line-height:1.45;-webkit-text-size-adjust:100%}

/* Allow menu wrapping on narrow widths */
.topbar-inner{flex-wrap:wrap;gap:8px}
.topbar .menu{flex-wrap:wrap}
.topbar .badge{margin-left:auto}

/* Adaptive sidebar width */
@media (max-width:1400px){.app{grid-template-columns:320px 1fr}}
@media (max-width:1200px){.app{grid-template-columns:300px 1fr}}

/* Mobile improvements */
@media (max-width:560px){
  .topbar-inner{padding:10px 12px}
  .menu .m-btn{padding:6px 10px;font-size:.8rem}
  .brand{font-size:14px}
}

/* Messages: long word & emoji wrap */
.msg{word-break:break-word;overflow-wrap:break-word}

/* Scroll behavior tweaks */
.c-messages{overscroll-behavior:contain;scrollbar-width:thin;scrollbar-color:#1f2d33 transparent}
.c-messages::-webkit-scrollbar{width:10px}
.c-messages::-webkit-scrollbar-track{background:transparent}
.c-messages::-webkit-scrollbar-thumb{background:#1f2d33;border-radius:20px;border:2px solid #0b141a}

/* Focus visible outlines */
button:focus-visible, .input:focus-visible, .chip:focus-visible{outline:2px solid var(--wa-accent);outline-offset:2px}

/* Reduce motion preference */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.01ms!important;animation-iteration-count:1!important;transition:none!important;scroll-behavior:auto!important}
}

/* Modal full-screen adaptation on very small devices */
@media (max-width:520px){
  .modal-card{width:100%;height:100%;max-height:none;border-radius:0}
  .modal-b{padding:16px}
}

/* Safe-area padding adjustments */
.topbar-inner{padding-top:calc(10px + env(safe-area-inset-top));}
.c-composer{padding-bottom:calc(10px + env(safe-area-inset-bottom));}

/* Improve tap targets on touch devices */
@media (pointer:coarse){
  .icon-btn, .menu .m-btn, .chip{min-height:44px}
}

/* Utility: hide scrollbar in chat list on touch while keeping scroll */
@media (pointer:coarse){
  .chat-list::-webkit-scrollbar{display:none}
  .chat-list{scrollbar-width:none}
}

/* Minor polish */
.chat-item{transition:background .15s}
.chat-item:active{background:#132026}
.msg{transition:background .2s}
.msg:active{filter:brightness(1.1)}

/* Light theme variant */
[data-theme='light']{--wa-bg:#ececec;--wa-panel:#ffffff;--wa-card:#f5f5f5;--wa-border:#d8e0e4;--text:#1f2a30;--muted:#5c6a72;--bubble-in:#ffffff;--bubble-out:#cfeee4;--wa-green-dark:#0c7569;background:var(--wa-bg);color:var(--text)}
[data-theme='light'] .sidebar{background:var(--wa-panel)}
[data-theme='light'] .chat{background:#e4ebe9}
[data-theme='light'] .c-messages{background:linear-gradient(#d9dde0,#e4ebe9)}
[data-theme='light'] .chat-item:hover{background:#f1f5f4}
[data-theme='light'] .chat-item.is-active{background:#e0eeea}
[data-theme='light'] .c-header{background:var(--wa-panel)}
[data-theme='light'] .c-composer{background:var(--wa-panel)}
[data-theme='light'] .input{background:#f2f7f6;border-color:#d0d8db;color:var(--text)}
[data-theme='light'] .badge{background:#e8f7f1;color:#0d3f34;border-color:#8ed7bb}
[data-theme='light'] .menu .m-btn, [data-theme='light'] .icon-btn{border-color:#c5d2d7;color:#1e2d33;background:#f8fafb}
[data-theme='light'] .menu .m-btn:hover{background:#eef3f5}
[data-theme='light'] .modal-card{background:var(--wa-panel)}
[data-theme='light'] .chip{background:#f1f5f4;border-color:#d5e1e5;color:#1f2a30}
[data-theme='light'] .chip.is-active{background:#d9efe8;border-color:#b2d7cb}

/* Flow IA extras */
.cb-block input.input{font-size:13px}
.cb-block textarea.input{font-size:13px}

/* Unread badge & star styles (new) */
.chat-item .unread{background:var(--wa-accent,#25d366);color:#fff;border-radius:12px;padding:0 6px;font-size:11px;line-height:18px;display:inline-block;margin-left:4px;font-weight:600}
.chat-item .star-btn{background:none;border:none;cursor:pointer;font-size:14px;margin-left:4px;color:var(--muted);transition:color .15s}
.chat-item .star-btn:hover{color:var(--wa-accent,#25d366)}
.chat-item .name{display:flex;align-items:center;gap:4px}
[data-theme='light'] .chat-item .unread{box-shadow:0 0 0 1px #fff}

/* Hamburger dropdown */
.dropdown{position:relative}
.dropdown-menu{position:absolute;right:0;top:calc(100% + 6px);background:var(--wa-panel);border:1px solid var(--wa-border);border-radius:10px;box-shadow:var(--shadow);display:none;min-width:180px;overflow:hidden}
.dropdown-left .dropdown-menu{left:0;right:auto}
.dropdown.show .dropdown-menu{display:block}
.dropdown-menu .menu-item{display:block;width:100%;text-align:left;background:transparent;border:0;color:var(--text);padding:10px 12px;cursor:pointer}
.dropdown-menu .menu-item:hover{background:rgba(255,255,255,.06)}

/* Theme toggle icon (sun/moon) */
#theme-toggle::before{content:'\2600';} /* sun */
[data-theme='light'] #theme-toggle::before{content:'\1F319';} /* moon */

