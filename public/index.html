<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sant√™ Console</title>
  <link rel="stylesheet" href="/styles.css" />
  <script>(function(){try{const a=localStorage.getItem('auth')==='ok';const onL=location.pathname.endsWith('/login.html');if(!a&&!onL){location.replace('/login.html');}if(a&&onL){location.replace('/');}}catch(e){}})();</script>
</head>
<body>
  <header class="topbar"><div class="topbar-inner">
    <div class="brand">Sant√™ Console</div>
    <nav class="menu" role="navigation" aria-label="Atalhos principais">
      <button type="button" class="m-btn" id="menu-flow" aria-haspopup="dialog">Fluxo do chatbot</button>
      <button type="button" class="m-btn" id="menu-qr" aria-haspopup="dialog">Conectar QR</button>
      <button type="button" class="m-btn" id="menu-schedule" aria-haspopup="dialog">Agendar envios</button>
      <button type="button" class="m-btn" id="menu-tags" aria-haspopup="dialog">Etiquetar mensagem</button>
    </nav>
    <div style="display:flex;align-items:center;gap:8px;margin-left:auto">
      <button type="button" class="m-btn" id="theme-toggle" aria-label="Alternar tema">üåô</button>
      <div class="badge" id="svc-badge">Carregando‚Ä¶</div>
    </div>
  </div></header>

  <div class="app" id="app">
    <aside class="sidebar">
      <div class="s-header">
        <div class="brand" style="font-size:15px">Conversas</div>
  <div class="actions"><button type="button" class="icon-btn" id="new-chat" aria-label="Nova conversa">Ôºã</button></div>
      </div>
      <div class="s-search"><input class="input" id="search" placeholder="Pesquisar conversas‚Ä¶"></div>
      <div class="s-filters">
        <button class="chip is-active" data-filter="all">Todos</button>
        <button class="chip" data-filter="unread">N√£o lidas</button>
        <button class="chip" data-filter="starred">Com estrela</button>
      </div>
      <div class="chat-list" id="chat-list"></div>
    </aside>

    <section class="chat">
      <div class="c-header">
        <div class="peer">
          <button type="button" class="icon-btn" id="back" style="display:none" aria-label="Voltar">‚Üê</button>
          <div class="avatar"></div>
          <div class="meta">
            <div class="name" id="peer-name">Selecione uma conversa</div>
            <div class="status" id="online-badge">‚Äî</div>
          </div>
        </div>
        <div class="actions">
          <button type="button" class="icon-btn" id="chat-search" aria-label="Buscar na conversa">üîç</button>
          <button type="button" class="icon-btn" id="chat-info" aria-label="Informa√ß√µes da conversa">‚ÑπÔ∏è</button>
        </div>
      </div>
      <div class="c-messages" id="messages"></div>
    <form class="c-composer" id="composer">
  <button type="button" class="icon-btn" id="attach" aria-label="Anexar arquivo">üìé</button>
  <textarea class="input" id="text" placeholder="Escreva uma mensagem‚Ä¶" aria-label="Mensagem" rows="1" style="resize:none;overflow:hidden"></textarea>
  <button type="submit" class="btn" id="send" aria-label="Enviar mensagem">Enviar</button>
    </form>
    </section>
  </div>

  <script>
  // Util toast
  function toast(msg,type='ok'){
    const t=document.createElement('div');
    t.className='toast '+type;
    t.textContent=msg;
    document.body.appendChild(t);
    requestAnimationFrame(()=>t.classList.add('show'));
    setTimeout(()=>{t.classList.remove('show'); setTimeout(()=>t.remove(),200)},2500);
  }

  // Mock conversas
  const chats=[
    { id:'5511999990001@s.whatsapp.net', name:'Loja Centro', last:'Pedido #123 preparado', time:'09:12', unread:2, starred:false },
    { id:'5511999990002@s.whatsapp.net', name:'Cliente VIP', last:'Pode enviar a NF?', time:'Ontem', unread:0, starred:true },
    { id:'5511999990003@s.whatsapp.net', name:'Fornecedor', last:'Entrega confirmada', time:'Seg', unread:5, starred:false }
  ];
  let activeFilter='all';
  let currentChat=null;
  const app=document.getElementById('app');
  const listEl=document.getElementById('chat-list');
  const messagesEl=document.getElementById('messages');
  const peerName=document.getElementById('peer-name');
  const onlineBadge=document.getElementById('online-badge');
  const backBtn=document.getElementById('back');
  const svcBadge=document.getElementById('svc-badge');
  const textInput=document.getElementById('text');
  const composer=document.getElementById('composer');
  let msgSeq=0; // contador sint√©tico para IDs de mensagens
  const LS_CHAT_KEY='last_chat_id';

  function renderChatList(){
    listEl.innerHTML='';
    const lastId = localStorage.getItem(LS_CHAT_KEY);
    chats.filter(c=>{
      if(activeFilter==='unread') return (c.unread||0) > 0;
      if(activeFilter==='starred') return !!c.starred;
      return true;
    }).forEach(c=>{
      const item=document.createElement('div');
      item.className='chat-item';
      if(currentChat && currentChat.id===c.id) item.classList.add('is-active');
      if(!currentChat && lastId && lastId===c.id) item.classList.add('is-active');
      const unreadBadge = (c.unread||0) > 0 ? `<span class="unread">${c.unread}</span>` : '';
      const star = `<button class="star-btn" data-star="${c.id}" aria-label="Marcar favorito">${c.starred?'‚òÖ':'‚òÜ'}</button>`;
      item.innerHTML=`<div class="avatar"></div><div class="meta"><div class="name">${c.name} ${star}</div><div class="last">${c.last}</div></div><div class="time">${c.time} ${unreadBadge}</div>`;
      item.addEventListener('click',(ev)=>{
        const target = ev.target;
        if(target && target.closest && target.closest('.star-btn')) return; // Evita abrir chat ao clicar no star
        selectChat(c);
      });
      listEl.appendChild(item);
    });
    // Bind star buttons
    listEl.querySelectorAll('.star-btn').forEach(btn=>{
      btn.addEventListener('click', function(e){
        e.stopPropagation();
        const id = this.getAttribute('data-star');
        const chat = chats.find(ch=>ch.id===id);
        if(chat){ chat.starred=!chat.starred; renderChatList(); }
      })
    })
  }

  function selectChat(c){
    currentChat=c;
    localStorage.setItem(LS_CHAT_KEY, c.id);
    // clear unread count when opened
    c.unread=0;
    peerName.textContent=c.name;
    messagesEl.innerHTML='';
    // mock initial messages
    const seed=[
      {dir:'in', text:'Ol√°, em que posso ajudar?'},
      {dir:'out', text:'Quero detalhes do pedido.'},
      {dir:'in', text:'Claro! Pedido #123 sai hoje.'}
    ];
    seed.forEach(m=>pushMsg(m.dir,m.text));
    if(window.matchMedia('(max-width:1023px)').matches){
      app.dataset.view='chat';
      backBtn.style.display='inline-block';
    }
    // atualizar destaque
    document.querySelectorAll('.chat-item').forEach(el=>el.classList.remove('is-active'));
    // pequeno atraso para garantir render (caso chamado antes do primeiro render final)
    requestAnimationFrame(()=>{
      [...document.querySelectorAll('.chat-item')].find(el=>el.textContent.includes(c.name))?.classList.add('is-active');
    });
    scrollBottom();
  }

  function pushMsg(dir,text){
    const id = Date.now().toString(36)+'-'+(msgSeq++).toString(36);
    const el=document.createElement('div');
    el.className='msg '+(dir==='out'?'out':'in');
    el.setAttribute('data-id', id);
    el.textContent=text;
    // etiqueta existente via API (fetch pregui√ßoso)
    fetch('/tags').then(r=>r.ok?r.json():{tags:{}}).then(j=>{
      const t=j.tags||{}; if(t[id]){ const tagEl=document.createElement('div'); tagEl.className='meta'; tagEl.textContent='#'+t[id]; el.appendChild(tagEl); }
    }).catch(()=>{})
    // menu de contexto para etiquetar
    el.addEventListener('contextmenu', (e)=>{
      e.preventDefault();
      const tagInput = document.getElementById('tag-msg-id');
      if(tagInput) tagInput.value = id;
      show('#mdl-tags');
    });
    messagesEl.appendChild(el);
    scrollBottom();
  }
  function scrollBottom(){ messagesEl.scrollTop=messagesEl.scrollHeight; }

  backBtn.onclick=()=>{
    delete app.dataset.view;
    backBtn.style.display='none';
  };

  // Health status
  async function refreshHealth(){
    try{
      const r=await fetch('/health');
      if(r.ok){svcBadge.textContent='Online';svcBadge.style.background='#0f1a16';svcBadge.style.color='#9be3c2';}
      else {svcBadge.textContent='Offline';svcBadge.style.background='#3a1a1a';svcBadge.style.color='#fca5a5';}
    }catch{svcBadge.textContent='Offline';svcBadge.style.background='#3a1a1a';svcBadge.style.color='#fca5a5';}
  }
  refreshHealth(); setInterval(refreshHealth,15000);

  // Session status polling
  const storedSession=localStorage.getItem('session_id');
  async function pollSession(){
    if(!storedSession) return;
    try{
      const r=await fetch(`/sessions/${encodeURIComponent(storedSession)}/status`);
      if(r.ok){
        const j=await r.json();
        onlineBadge.textContent=j.state==='open'?'online':j.state;
      }
    }catch{}
  }
  pollSession(); setInterval(pollSession,5000);

  // Composer send
  composer.addEventListener('submit', async (e)=>{
    e.preventDefault();
    if(!currentChat){ toast('Selecione uma conversa','err'); return; }
    const text=(textInput.value||'').trim();
    if(!text) return;
    pushMsg('out',text);
    const payload={ session_id: localStorage.getItem('session_id') || '', to: currentChat.id, text };
    textInput.value='';
    autoResize(textInput);
    try{
      const r=await fetch('/messages/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
      if(!r.ok){ toast('Falha ao enviar','err'); }
    }catch{ toast('Falha ao enviar','err'); }
  });

  // Auto-resize textarea up to a max height (approx 6 lines)
  function autoResize(el){
    if(!el) return; el.style.height='auto';
    const max=140; // px
    const h=Math.min(el.scrollHeight, max);
    el.style.height=h+'px';
    el.style.overflowY = el.scrollHeight>max ? 'auto':'hidden';
  }
  textInput.addEventListener('input',()=>autoResize(textInput));
  autoResize(textInput);

  // Enter to send (desktop style): Enter sends, Shift+Enter newline
  textInput.addEventListener('keydown',(e)=>{
    if(e.key==='Enter' && !e.shiftKey){
      e.preventDefault();
      // Trigger submit programmatically
      composer.requestSubmit();
    }
  });

  // New chat just demonstrates toast
  document.getElementById('new-chat').onclick=()=>toast('Funcionalidade futura');

  // Filter chips
  document.querySelectorAll('.s-filters .chip').forEach(chip=>{
    chip.addEventListener('click',()=>{
      document.querySelectorAll('.s-filters .chip').forEach(c=>c.classList.remove('is-active'));
      chip.classList.add('is-active');
      activeFilter = chip.getAttribute('data-filter')||'all';
      renderChatList();
    });
  });

  // Attachment button behavior (placeholder)
  const attachBtn=document.getElementById('attach');
  if(attachBtn){
    const fileInput=document.createElement('input');
    fileInput.type='file';
    fileInput.style.display='none';
    document.body.appendChild(fileInput);
    attachBtn.addEventListener('click',()=>fileInput.click());
    fileInput.addEventListener('change',()=>{
      if(fileInput.files && fileInput.files[0]){
        toast('Arquivo selecionado: '+fileInput.files[0].name);
      }
    });
  }

  renderChatList();
  // Restaurar √∫ltima conversa se existir
  const restoreId=localStorage.getItem(LS_CHAT_KEY);
  if(restoreId){
    const found=chats.find(c=>c.id===restoreId);
    if(found) selectChat(found);
  }
  // ==== Modal utilities & feature mocks ====
  function $(s,root=document){return root.querySelector(s)}
  function show(id){ $(id).classList.add('show') }
  function hide(el){ el.classList.remove('show') }
  document.querySelectorAll('.modal [data-close]')?.forEach(b=>b.addEventListener('click',e=>hide(e.target.closest('.modal'))))

  // Open modals
  $('#menu-flow')?.addEventListener('click', ()=>show('#mdl-flow'))
  $('#menu-qr')?.addEventListener('click', ()=>show('#mdl-qr'))
  $('#menu-schedule')?.addEventListener('click', ()=>show('#mdl-schedule'))
  $('#menu-tags')?.addEventListener('click', ()=>show('#mdl-tags'))

  // Conectar QR
  $('#qr-open')?.addEventListener('click', async ()=>{
    const id = $('#qr-session')?.value?.trim()
    if(!id) return toast('Informe session_id','err')
    await fetch('/sessions/create',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({session_id:id})})
    localStorage.setItem('session_id', id)
    window.open(`/qr.html?session_id=${encodeURIComponent(id)}`,'_blank')
  })

  // === Flows (API) ===
  async function createFlow(){
    const name = $('#flow-name')?.value?.trim()||'Fluxo'
    let nodes; try{ nodes = JSON.parse($('#flow-json')?.value || '[]') }catch{ return toast('JSON inv√°lido','err') }
    try {
      const r=await fetch('/flows',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,nodes})})
      if(!r.ok) return toast('Erro ao salvar fluxo','err')
      toast('Fluxo salvo'); hide($('#mdl-flow'))
    } catch { toast('Erro rede','err') }
  }
  $('#flow-save')?.addEventListener('click', createFlow)

  // === Schedules (API) ===
  async function fetchSchedules(){
    try{ const r=await fetch('/schedules'); if(!r.ok) return []; const j=await r.json(); return j.schedules||[] }catch{return []}
  }
  async function renderSchedules(){ const box = $('#sched-list'); if(!box) return; const arr = await fetchSchedules(); box.innerHTML = arr.length? arr.map(s=>`‚Ä¢ ${new Date(s.when).toLocaleString()} ‚Üí ${s.to}: "${s.text}" <span style='opacity:.6'>(${s.status})</span>`).join('<br>') : 'Sem agendamentos.' }
  renderSchedules()
  $('#sched-save')?.addEventListener('click', async ()=>{
    const session_id = $('#sched-session')?.value?.trim() || localStorage.getItem('session_id') || ''
    const to = $('#sched-to')?.value?.trim()
    const text = $('#sched-text')?.value?.trim()
    const when = $('#sched-when')?.value
    if(!session_id||!to||!text||!when) return toast('Preencha todos os campos','err')
    try{
      const r=await fetch('/schedules',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({session_id,to,text,when})})
      if(!r.ok) return toast('Erro ao agendar','err')
      toast('Agendado')
      renderSchedules()
    }catch{ toast('Erro rede','err') }
  })

  // === Tags (API) ===
  async function fetchTags(){ try{ const r=await fetch('/tags'); if(!r.ok) return {}; const j=await r.json(); return j.tags||{} }catch{return {}} }
  async function renderTags(){ const box = $('#tag-list'); if(!box) return; const t = await fetchTags(); box.innerHTML = Object.keys(t).length? Object.entries(t).map(([k,v])=>`‚Ä¢ ${k}: ${v}`).join('<br>') : 'Sem etiquetas.' }
  renderTags()
  $('#tag-save')?.addEventListener('click', async ()=>{
    const id = $('#tag-msg-id')?.value?.trim()
    const label = $('#tag-label')?.value?.trim()
    if(!id||!label) return toast('Informe id e etiqueta','err')
    try {
      const r=await fetch('/tags',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message_id:id,label})})
      if(!r.ok) return toast('Erro ao etiquetar','err')
      toast('Etiqueta aplicada'); renderTags();
    } catch { toast('Erro rede','err') }
  })

  // toast util fallback
  if(typeof toast!=='function'){
    window.toast = function(msg,type='ok'){
      const t=document.createElement('div');t.className='toast '+type; t.textContent=msg; document.body.appendChild(t);
      requestAnimationFrame(()=>t.classList.add('show')); setTimeout(()=>{t.classList.remove('show'); setTimeout(()=>t.remove(),200)},2500)
    }
  }

  // === Theme Toggle ===
  (function(){
    const btn=document.getElementById('theme-toggle');
    if(!btn) return;
    const root=document.documentElement;
    const KEY='theme_pref';
    function apply(t){ if(t==='light'){ root.setAttribute('data-theme','light'); btn.textContent='üåô'; btn.setAttribute('aria-label','Usar tema escuro'); } else { root.removeAttribute('data-theme'); btn.textContent='‚òÄÔ∏è'; btn.setAttribute('aria-label','Usar tema claro'); } }
    let pref=localStorage.getItem(KEY);
    if(!pref){
      // auto detect system
      pref=window.matchMedia('(prefers-color-scheme: light)').matches? 'light':'dark';
    }
    apply(pref);
    btn.addEventListener('click',()=>{
      pref = (root.getAttribute('data-theme')==='light')? 'dark':'light';
      localStorage.setItem(KEY,pref);
      apply(pref);
    });
  })();
  </script>

  <!-- Fluxo do chatbot -->
  <div class="modal" id="mdl-flow">
    <div class="modal-card">
      <div class="modal-h"><strong>Fluxo do chatbot</strong><button class="m-btn" data-close>‚úï</button></div>
      <div class="modal-b">
        <p class="help">Monte um fluxo simples de n√≥s e respostas (mock). Depois plugamos no config/bot.yaml.</p>
        <div class="row"><span class="label">Nome do fluxo</span><input class="input" id="flow-name" placeholder="Ex. Recep√ß√£o Sant√™"></div>
        <div class="row"><span class="label">N√≥s</span><textarea class="input" id="flow-json" rows="8" placeholder='[{"id":"start","text":"Ol√°!","next":"menu"}]'></textarea></div>
        <div class="help">Formato JSON minimal: id, text, next (ou options:[{label,next}]).</div>
      </div>
      <div class="modal-f"><button class="m-btn" data-close>Cancelar</button><button class="btn" id="flow-save">Salvar fluxo</button></div>
    </div>
  </div>

  <!-- Conectar QR -->
  <div class="modal" id="mdl-qr">
    <div class="modal-card">
      <div class="modal-h"><strong>Conectar QR</strong><button class="m-btn" data-close>‚úï</button></div>
      <div class="modal-b">
        <div class="row"><span class="label">Session ID</span><input class="input" id="qr-session" placeholder="Ex. santemoda-01"></div>
        <p class="help">Cria a sess√£o e abre o QR em nova aba.</p>
      </div>
      <div class="modal-f"><button class="m-btn" data-close>Fechar</button><button class="btn" id="qr-open">Abrir QR</button></div>
    </div>
  </div>

  <!-- Agendar envios -->
  <div class="modal" id="mdl-schedule">
    <div class="modal-card">
      <div class="modal-h"><strong>Agendar envios</strong><button class="m-btn" data-close>‚úï</button></div>
      <div class="modal-b">
        <div class="row"><span class="label">Session ID</span><input class="input" id="sched-session" placeholder="Ex. santemoda-01"></div>
        <div class="row"><span class="label">Para (JID)</span><input class="input" id="sched-to" placeholder="5511999999999@s.whatsapp.net"></div>
        <div class="row"><span class="label">Mensagem</span><input class="input" id="sched-text" placeholder="Texto da campanha"></div>
        <div class="row"><span class="label">Quando</span><input class="input" id="sched-when" type="datetime-local"></div>
        <div class="help">Mock local: salva no localStorage e executa no hor√°rio via setTimeout (enquanto a p√°gina estiver aberta).</div>
        <div id="sched-list" class="help"></div>
      </div>
      <div class="modal-f"><button class="m-btn" data-close>Fechar</button><button class="btn" id="sched-save">Agendar</button></div>
    </div>
  </div>

  <!-- Etiquetar mensagem -->
  <div class="modal" id="mdl-tags">
    <div class="modal-card">
      <div class="modal-h"><strong>Etiquetar mensagem</strong><button class="m-btn" data-close>‚úï</button></div>
      <div class="modal-b">
        <div class="row"><span class="label">ID da msg</span><input class="input" id="tag-msg-id" placeholder="ex. key.id"></div>
        <div class="row"><span class="label">Etiqueta</span><input class="input" id="tag-label" placeholder="Prioridade, VIP, Suporte..."></div>
        <div class="help">Mock: vamos manter um map de etiquetas em localStorage (msgId -> tag).</div>
        <div id="tag-list" class="help"></div>
      </div>
      <div class="modal-f"><button class="m-btn" data-close>Fechar</button><button class="btn" id="tag-save">Aplicar etiqueta</button></div>
    </div>
  </div>

  <!-- Late binding script to ensure modal elements exist -->
  <script>
  (function(){
    // Re-bind close buttons with event delegation (in case initial binding missed due to DOM order)
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(t && t.matches && t.matches('.modal [data-close]')){
        const modal = t.closest('.modal');
        if(modal) modal.classList.remove('show');
      }
    });

    // Safe query helper (JS only)
  function $(s, r){ return (r||document).querySelector(s); }

    // If earlier listeners failed (elements absent), attach now.
    $('#qr-open')?.getAttribute('data-bound') || $('#qr-open')?.addEventListener('click', async ()=>{
      const el = $('#qr-session');
      const id = el && el.value ? el.value.trim() : '';
      if(!id) return toast('Informe session_id','err');
      try {
        await fetch('/sessions/create',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({session_id:id})});
        localStorage.setItem('session_id', id);
        window.open(`/qr.html?session_id=${encodeURIComponent(id)}`,'_blank');
      } catch { toast('Erro ao criar sess√£o','err'); }
    });

    $('#flow-save')?.getAttribute('data-bound') || $('#flow-save')?.addEventListener('click', async ()=>{
      const nameEl = $('#flow-name');
      const jsonEl = $('#flow-json');
      const name = (nameEl && nameEl.value ? nameEl.value.trim() : '') || 'Fluxo';
      let nodes=[]; try{ nodes = JSON.parse(jsonEl && jsonEl.value ? jsonEl.value : '[]') }catch{return toast('JSON inv√°lido','err')}
      try{ const r=await fetch('/flows',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,nodes})}); if(!r.ok) return toast('Erro ao salvar fluxo','err'); toast('Fluxo salvo'); $('#mdl-flow')?.classList.remove('show'); }catch{toast('Erro rede','err')}
    });

    $('#sched-save')?.getAttribute('data-bound') || $('#sched-save')?.addEventListener('click', async ()=>{
      const sEl=$('#sched-session'); const toEl=$('#sched-to'); const txtEl=$('#sched-text'); const whenEl=$('#sched-when');
      const session_id = (sEl && sEl.value ? sEl.value.trim() : '') || localStorage.getItem('session_id') || '';
      const to = toEl && toEl.value ? toEl.value.trim() : '';
      const text = txtEl && txtEl.value ? txtEl.value.trim() : '';
      const when = whenEl && whenEl.value ? whenEl.value : '';
      if(!session_id||!to||!text||!when) return toast('Preencha todos os campos','err');
      try{ const r=await fetch('/schedules',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({session_id,to,text,when})}); if(!r.ok) return toast('Erro ao agendar','err'); toast('Agendado'); }catch{ toast('Erro rede','err') }
    });

    $('#tag-save')?.getAttribute('data-bound') || $('#tag-save')?.addEventListener('click', async ()=>{
      const idEl=$('#tag-msg-id'); const labelEl=$('#tag-label');
      const id = idEl && idEl.value ? idEl.value.trim() : '';
      const label = labelEl && labelEl.value ? labelEl.value.trim() : '';
      if(!id||!label) return toast('Informe id e etiqueta','err');
      try{ const r=await fetch('/tags',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message_id:id,label})}); if(!r.ok) return toast('Erro ao etiquetar','err'); toast('Etiqueta aplicada'); }catch{ toast('Erro rede','err') }
    });

    // Menu open bindings safeguard (in case earlier script ran too early somehow)
    $('#menu-flow')?.addEventListener('click', ()=>$('#mdl-flow')?.classList.add('show'))
    $('#menu-qr')?.addEventListener('click', ()=>$('#mdl-qr')?.classList.add('show'))
    $('#menu-schedule')?.addEventListener('click', ()=>$('#mdl-schedule')?.classList.add('show'))
    $('#menu-tags')?.addEventListener('click', ()=>$('#mdl-tags')?.classList.add('show'))
  })();
  </script>
</body>
</html>